/*
 * Copyright (C) 2025 jsouthgb
 *
 * This file is part of gdluxx.
 *
 * gdluxx is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 (GPL-2.0),
 * as published by the Free Software Foundation.
 */

@import 'tailwindcss';

@theme {
  --color-background: #ffffff;
  --color-surface: #fafafa;
  --color-surface-elevated: #ffffff;
  --color-surface-sunken: #f5f5f5;
  --color-surface-overlay: #f8fafc;

  --color-foreground: #111111;
  --color-muted-foreground: #6b7280;
  --color-accent-foreground: #374151;
  --color-text-inverse: #ffffff;
  --color-text-disabled: #9ca3af;

  --color-primary: #6366f1;
  --color-primary-hover: #4f46e5;
  --color-primary-active: #4338ca;
  --color-primary-disabled: #c7d2fe;
  --color-primary-text: #ffffff;

  --color-surface-hover: #f3f4f6;
  --color-surface-active: #e5e7eb;
  --color-surface-selected: #eef2ff;
  --color-surface-disabled: #f9fafb;

  --color-success: #059669;
  --color-success-hover: #047857;
  --color-success-active: #065f46;
  --color-success-text: #ffffff;

  --color-warning: #d97706;
  --color-warning-hover: #b45309;
  --color-warning-active: #92400e;
  --color-warning-text: #ffffff;

  --color-error: #dc2626;
  --color-error-hover: #b91c1c;
  --color-error-active: #991b1b;
  --color-error-text: #ffffff;

  --color-info: #2563eb;
  --color-info-hover: #1d4ed8;
  --color-info-active: #1e40af;
  --color-info-text: #ffffff;

  --color-border: #e5e7eb;
  --color-border-strong: #d1d5db;
  --color-border-focus: #6366f1;
  --color-border-disabled: #f3f4f6;
  --color-border-error: #fca5a5;
  --color-border-success: #86efac;
  --color-border-info: #93c5fd;
  --color-border-warning: #fed7aa;

  --color-input-background: #ffffff;
  --color-input-disabled: #f9fafb;
  --color-input-invalid: #fef2f2;
  --color-input-valid: #f0fdf4;

  --color-skeleton: #f3f4f6;
  --color-spinner: #6366f1;

  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
}

/* Border utilities are border width + color */
@utility border-strong {
  border: 1px solid var(--color-border-strong);
}
@utility border-focus {
  border: 1px solid var(--color-border-focus);
}
@utility border-disabled {
  border: 1px solid var(--color-border-disabled);
}
@utility border-primary {
  border: 1px solid var(--color-primary);
}
@utility border-success {
  border: 1px solid var(--color-success);
}
@utility border-warning {
  border: 1px solid var(--color-warning);
}
@utility border-error {
  border: 1px solid var(--color-error);
}
@utility border-info {
  border: 1px solid var(--color-info);
}

/* Directional borders */
@utility border-t-strong {
  border-top: 1px solid var(--color-border-strong);
}
@utility border-r-strong {
  border-right: 1px solid var(--color-border-strong);
}
@utility border-b-strong {
  border-bottom: 1px solid var(--color-border-strong);
}
@utility border-l-strong {
  border-left: 1px solid var(--color-border-strong);
}

@utility border-t-primary {
  border-top: 1px solid var(--color-primary);
}
@utility border-r-primary {
  border-right: 1px solid var(--color-primary);
}
@utility border-b-primary {
  border-bottom: 1px solid var(--color-primary);
}
@utility border-l-primary {
  border-left: 1px solid var(--color-primary);
}

@utility border-t-success {
  border-top: 1px solid var(--color-success);
}
@utility border-r-success {
  border-right: 1px solid var(--color-success);
}
@utility border-b-success {
  border-bottom: 1px solid var(--color-success);
}
@utility border-l-success {
  border-left: 1px solid var(--color-success);
}

@utility border-t-error {
  border-top: 1px solid var(--color-error);
}
@utility border-r-error {
  border-right: 1px solid var(--color-error);
}
@utility border-b-error {
  border-bottom: 1px solid var(--color-error);
}
@utility border-l-error {
  border-left: 1px solid var(--color-error);
}

@layer utilities {
  .border-strong {
    border-color: var(--color-border-strong);
  }
  .border-focus {
    border-color: var(--color-border-focus);
  }
  .border-disabled {
    border-color: var(--color-border-disabled);
  }

  .bg-primary-hover {
    background-color: var(--color-primary-hover);
  }
  .bg-primary-active {
    background-color: var(--color-primary-active);
  }
  .bg-primary-disabled {
    background-color: var(--color-primary-disabled);
  }

  .text-on-primary {
    color: var(--color-primary-text);
  }

  .bg-success-hover {
    background-color: var(--color-success-hover);
  }
  .bg-success-active {
    background-color: var(--color-success-active);
  }
  .text-on-success {
    color: var(--color-success-text);
  }

  .bg-warning-hover {
    background-color: var(--color-warning-hover);
  }
  .bg-warning-active {
    background-color: var(--color-warning-active);
  }
  .text-on-warning {
    color: var(--color-warning-text);
  }

  .bg-error-hover {
    background-color: var(--color-error-hover);
  }
  .bg-error-active {
    background-color: var(--color-error-active);
  }
  .text-on-error {
    color: var(--color-error-text);
  }

  .bg-info-hover {
    background-color: var(--color-info-hover);
  }
  .bg-info-active {
    background-color: var(--color-info-active);
  }
  .text-on-info {
    color: var(--color-info-text);
  }

  .bg-surface-sunken {
    background-color: var(--color-surface-sunken);
  }
  .bg-surface-overlay {
    background-color: var(--color-surface-overlay);
  }
  .bg-surface-hover {
    background-color: var(--color-surface-hover);
  }
  .bg-surface-active {
    background-color: var(--color-surface-active);
  }
  .bg-surface-selected {
    background-color: var(--color-surface-selected);
  }
  .bg-surface-disabled {
    background-color: var(--color-surface-disabled);
  }

  .bg-input-background {
    background-color: var(--color-input-background);
  }
  .bg-input-disabled {
    background-color: var(--color-input-disabled);
  }
  .bg-input-invalid {
    background-color: var(--color-input-invalid);
  }
  .bg-input-valid {
    background-color: var(--color-input-valid);
  }

  .text-accent-foreground {
    color: var(--color-accent-foreground);
  }
  .text-inverse {
    color: var(--color-text-inverse);
  }
  .text-disabled {
    color: var(--color-text-disabled);
  }

  .bg-skeleton {
    background-color: var(--color-skeleton);
  }
  .text-spinner {
    color: var(--color-spinner);
  }

  .shadow-sm {
    box-shadow: var(--shadow-sm);
  }
  .shadow-md {
    box-shadow: var(--shadow-md);
  }
  .shadow-lg {
    box-shadow: var(--shadow-lg);
  }
}

@layer components {
  .content-panel {
    @apply cursor-default rounded-sm border bg-surface p-4 text-foreground;
    border: 1px solid var(--color-border-strong);
  }
  .content-panel h1 {
    @apply mb-4 text-2xl font-bold text-foreground;
  }
  .content-panel h2 {
    @apply mb-3 text-xl font-semibold text-accent-foreground;
  }
  .content-panel h3 {
    @apply mb-2 text-lg font-medium text-accent-foreground;
  }
  .content-panel-elevated {
    @apply rounded-sm border border-primary/35 bg-surface-elevated p-6 text-foreground shadow-sm;
  }
  .content-panel-sunken {
    @apply rounded-sm border border-primary/35 bg-surface-sunken p-6 text-foreground;
  }

  .data-list {
    @apply cursor-default rounded-sm border bg-surface;
    border: 1px solid var(--color-border-strong);
  }

  .data-list-header {
    @apply p-4 font-medium text-foreground;
    border-bottom: 1px solid var(--color-border-strong);
  }
  .data-list-header h2 {
    @apply mb-3 text-xl font-semibold text-foreground;
  }

  .data-list-item {
    @apply m-4 rounded-sm bg-surface-elevated p-4 transition-colors duration-150 hover:bg-surface-hover;
    border: 1px solid var(--color-border-strong);
  }

  .data-list-stats {
    @apply rounded-sm bg-surface-elevated p-4 text-foreground;
    border: 1px solid var(--color-border-strong);
  }

  .data-list-controls {
    @apply rounded-sm bg-surface-elevated p-3;
    border: 1px solid var(--color-border-strong);
  }

  .data-list-item-interactive {
    @apply cursor-pointer hover:bg-surface-selected;
  }

  .data-list-item-disabled {
    @apply cursor-not-allowed opacity-60 hover:bg-surface-elevated;
  }

  .form-input {
    @apply w-full rounded-sm border px-3 py-2 text-sm text-foreground;
    @apply focus:ring-1 focus:ring-primary focus:outline-none;
    @apply transition-colors duration-150;
    @apply placeholder:text-muted-foreground;
    background-color: var(--color-input-background);
    border: 1px solid var(--color-border-strong);
  }

  .form-input:focus,
  .form-input:focus-visible {
    border-color: var(--color-border-focus);
    box-shadow: 0 0 0 1px var(--color-primary);
  }

  .form-input:disabled {
    @apply cursor-not-allowed;
    background-color: var(--color-input-disabled);
    border: 1px solid var(--color-border-strong);
    color: var(--color-text-disabled);
  }

  .form-input-error {
    background-color: var(--color-input-invalid);
    border-color: var(--color-error);
  }

  .form-input-error:focus,
  .form-input-error:focus-visible {
    border-color: var(--color-error);
    box-shadow: 0 0 0 1px var(--color-error);
  }

  .form-input-success {
    background-color: var(--color-input-valid);
    border-color: var(--color-success);
  }

  .form-input-success:focus,
  .form-input-success:focus-visible {
    border-color: var(--color-success);
    box-shadow: 0 0 0 1px var(--color-success);
  }

  .form-input-sm {
    @apply px-2.5 py-1.5 text-xs;
  }

  .form-input-lg {
    @apply px-4 py-3 text-base;
  }

  .form-textarea {
    @apply w-full rounded-sm border px-3 py-2 text-sm text-foreground;
    @apply focus:ring-1 focus:ring-primary focus:outline-none;
    @apply transition-colors duration-150;
    @apply placeholder:text-muted-foreground;
    @apply min-h-[80px] resize-none;
    background-color: var(--color-input-background);
    border: 1px solid var(--color-border-strong);
  }

  .form-textarea:focus,
  .form-textarea:focus-visible {
    border-color: var(--color-border-focus);
    box-shadow: 0 0 0 1px var(--color-primary);
  }

  .form-textarea:disabled {
    @apply cursor-not-allowed;
    background-color: var(--color-input-disabled);
    border: 1px solid var(--color-border-strong);
    color: var(--color-text-disabled);
  }

  .form-select {
    @apply w-full rounded-sm border px-3 py-2 text-sm text-foreground;
    @apply focus:ring-1 focus:ring-primary focus:outline-none;
    @apply transition-colors duration-150;
    @apply placeholder:text-muted-foreground;
    @apply cursor-pointer;
    background-color: var(--color-input-background);
    border: 1px solid var(--color-border-strong);
    appearance: none;
    background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3E%3C/svg%3E");
    background-position: right 0.5rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
    padding-right: 2.5rem;
  }

  .form-select:focus,
  .form-select:focus-visible {
    border-color: var(--color-border-focus);
    box-shadow: 0 0 0 1px var(--color-primary);
  }

  .form-select:disabled {
    @apply cursor-not-allowed;
    background-color: var(--color-input-disabled);
    border: 1px solid var(--color-border-strong);
    color: var(--color-text-disabled);
    background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%239ca3af' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3E%3C/svg%3E");
  }
}

@layer base {
  *,
  *::before,
  *::after {
    transition:
      background-color 0.3s ease-in-out,
      border-color 0.3s ease-in-out,
      color 0.3s ease-in-out,
      opacity 0.3s ease-in-out,
      box-shadow 0.3s ease-in-out,
      transform 0.3s ease-in-out;
  }

  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  :focus-visible {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }

  @media (prefers-contrast: more) {
    button,
    [role='button'],
    input,
    select,
    textarea {
      border: 2px solid;
    }
  }

  button:focus-visible,
  [role='button']:focus-visible,
  a:focus-visible,
  input:focus-visible,
  select:focus-visible,
  textarea:focus-visible {
    box-shadow:
      0 0 0 2px var(--color-background),
      0 0 0 4px var(--color-primary);
  }

  input[type='search']::-webkit-search-cancel-button {
    display: none;
  }
}
